# Chapter 6. 관계 데이터 연산
## 1. 관계 데이터 연산의 개념
- 연산: 원하는 데이터를 얻기 위해 릴레이션에 필요한 처리 요구를 수행하는 것
	- 데이터 언어의 역할
- 관계 데이터 연산(relationship data operation)
	- 관계 대수(relational algebra): 원하는 결과를 얻기 위해 데이터의 처리 과정을 순서대로 기술하는 절차 언어
	- 관계 해석(relational caculus): 원하는 결과를 얻기 위해 처리를 원하는 데이터가 무엇인지만 기술하는 비절차 언어
## 2. 관계 대수
### 1. 관계 대수의 개념과 연산자
- 관계 대수: 원하는 결과를 얻기 위해 릴레이션을 처리하는 과정을 순서대로 기술하는 언어
	- 연산자들의 집합으로도 정의 가능
- 관계 대수에서는 피연산자가 릴레이션, 적용해 얻은 결과도 릴레이션
	- 폐쇄 특성(closure property)
#### 일반 집합 연산자(set operation)
- 릴레이션이 튜플의 집합
- 합집합
- 교집합
- 차집합
- 카티션 프로덕트: 릴레이션 R의 각 튜플과 릴레이션 S의 각 튜플을 모두 연결하여 만든 새로운 튜플을 반환
#### 순수 집합 연산자(relational operation)
- 릴레이션의 구조와 특성을 이용하는 것
	- 관계 데이터 모델에서 새로 제시됨
- 셀렉트: 릴레이션 R에서 조건을 만족하는 튜플들 반환
- 프로젝트: 릴레이션 R에서 주어진 속성들의 값으로만 구성된 튜플들을 반환
- 조인: 공통 속성을 이용해 릴레이션 R과 S의 튜플들을 연결하여 만든 새로운 튜플들 반환
- 디비전: 릴레이션 S의 모든 튜플과 관련이 있는 릴레이션 R의 튜플들 반환
### 2. 일반 집합 연산자
- 제약조건
	1. 일반 집합 연산자는 연산을 위해 피연산자가 2개 필요
	2. 합집합, 교집합, 차집합은 피연산자인 2개의 릴레이션이 합병 가능(union-compatible)해야 함
		- 두 릴레이션의 차수가 같다(속성 개수가 같다)
		- 서로 대응되는 속성의 도메인이 같다(도메인이 같으면 속성 이름은 달라도 됨)
### 3. 순수 관계 연산자
#### 셀렉트
$$ σ_{조건식} (릴레이션) $$ 
- 하나의 릴레이션 대상으로 수행
- 조건식은 비교 연산자로 구성 (비교식, 프레디킷 predicate 이라고도 함)
```
릴레이션 where 조건식
```
- 교환적 특징 있음
#### 프로젝트
- 릴레이션에서 선택한 속성에 해당하는 값으로 결과 릴레이션 구성
- 주어진 릴레이션의 수직적 부분집합(vertical subset) 생성
$$ π_{속성리스트} (릴레이션) $$

```
릴레이션[속성리스트]
```
#### 조인
- 여러 릴레이션을 함께 사용해야하는 경우에 사용
$$ 릴레이션1 ⨝  릴레이션2 $$

- 동등 조인(equi-join)
	- 보통 조인하면 동등 조인 의미함
- 세타 조인(theta-join)
	- 주어진 조인 조건을 만족하는 두 릴레이션의 모든 투플을 연결한 새로운 투플로 결과 릴레이션 구성
$$ 릴레이션1 ⨝_{AθB}  릴레이션2 $$

	- AθB: 조인 조건
		- A: 릴레이션1의 속성
		- B: 릴레이션2의 속성
		- θ: 비교 연산자
		- 속성 값에 대한 비교가 가능하도록 A와 B는 같은 도메인으로 정의되어야 함
- 자연 조인(natural join)
	- 결과 릴레이션에서 중복된 속성 제거하여 조인 속성 한번만 나타남
$$ 릴레이션1 ⨝_{N}  릴레이션2 $$
#### 디비전
$$ R ÷ S $$

- 릴레이션 S의 모든 튜플과 관련 있는 릴레이션 R의 튜플로 결과 릴레이션 구성
	- 릴레이션 R이 릴레이션 S의 모든 속성을 포함하고 있어야 연산 가능
### 4. 관계 대수를 이용한 질의 표현
### 5. 확장된 관계 대수 연산자
#### 세미 조인(semi-join)
- 릴레이션 S의 조인 속성으로만 구성한(프로젝트한) 릴레이션을 릴레이션 R에 자연 조인하는 것
- 교환 특성 없음
#### 외부 조인(outer-join)
- 두 릴레이션에 자연 조인 연산을 수행할 때 조인 속성 값이 같은 튜플이 상대 릴레이션에 존재하지 않아 조인 연산에서 제외된 모든 튜플을 결과 릴레이션에 포함시킴
	- 속성 값 없는 경우는 널 값으로 처리
- 모든 튜플을 결과 릴레이션으로 가져오고자 하는 릴레이션이 무엇이냐에 따라 왼쪽, 오른쪽, 완전 외부 조인으로 세분화
## 3. 관계 해석
- 관계 해석: 처리를 원하는 데이터가 무엇인지만 기술하는 비절차 언어
	- 관계 대수처럼 관계 데이터 연산의 한 종류
# Chapter 7. 데이터베이스 언어 SQL
## 1. SQL의 소개
- SQL(Strucutred Query Language): 관계 데이터베이스를 위한 표준 질의어로 많이 사용되는 언어
## 2. SQL을 이용한 데이터 정의
### 1. SQL의 데이터 정의 기능
### 2. 테이블의 생성
```sql
CREATE TABLE 테이블_이름 (
	속성_이름 데이터_타입 [NOT NULL] [DEFAULT 기본_값]
	[PRIMARY KEY (속성_리스트)]
	[UNIQUE (속성_리스트)]
	[FOREIGN KEY (속성_리스트) REFERENCES 테이블_이름(속성_리스트)] [ON DELETE 옵션] [ON UPDATE 옵션]
	[CONSTRAINT 이름] [CHECK(조건)]
)
```
1. 각 속성의 이름, 데이터 타입, 기본적 제약 사항 정의
2. 기본키로 테이블 당 하나만 존재
3. 대체키로 테이블에 여러 개 존재 가능
4. 외래키로 테이블에 여러 개 존재 가능
5. 데이터 무결성을 위한 제약조건(여러 개 존재 가능)