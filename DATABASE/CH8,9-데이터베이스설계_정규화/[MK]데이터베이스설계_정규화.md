# Chapter 08. 데이터베이스 설계
## 1. 데이터베이스 설계 단계
1. 요구 사항 분석: 조직의 구성원들이 데이터베이스 사용하는 용도 파악
   - 요구 사항 명세서
2. 개념적 설계: 명세서를 바탕으로 시작
   - 개념적 스키마(ERD)
3. 논리적 설계: 개발에 사용할 DBMS에 적합한 논리적 데이터 모델을 이용해 개념적 구조를 기반으로 논리적 구조 설계
   - 논리적 스키마(릴레이션 스키마)
4. 물리적 설계: 논리적 구조 기반으로 물리적 구조 설계
   - 물리적 스키마
5. 구현: 이전 설계 단계의 결과물을 기반으로 DBMS에서 SQL로 작성한 명령문을 실행해 DB를 실제로 생성
## 2. 요구 사항 분석
- 사용자들의 요구 사항 수집, 분석
- 개발할 DB의 용도를 명확히 파악
## 3. 개념적 설계
- 개념적 데이터 모델: 사용자 요구 사항에 따라 분석한 결과를 바탕으로 DB에 저장해둘 필요가 있다고 판단되는 데이터 요소를 추출하고 데이터 요소 간의 관계를 파악하여 표현한 것
- E-R 다이어그램
### 1. 개체와 속성 추출
- 요구사항 명세서에서 개체를 추출
- 개체: 현실 세계에서 어떤 조직을 운영하는 데 꼭 필요한 사람, 사물과 같이 구별되는 모든 것을 의미
- 찾아낸 명사를 개체와 속성으로 분류하는 작업 필요
### 2. 관계 추출
- 개체 간의 관계 결정
	- 동사로 표현됨
- 추출한 관계에 대한 매핑 카디널리티와 참여 특성 결정
	- 매핑 카디널리티: 관계를 맺고 있는 두 개체에서 각 개체 인스턴스가 관계를 맺고 있는 상대 개체의 개체 인스턴스 개수 의미
	- 필수 참여, 선택적 참여인지 참여 특성 결정
### 3. E-R 다이어그램 작성
## 4. 논리적 설계
- ERD를 릴레이션 스키마, 즉 테이블 스키마로 변환
### 1. 릴레이션 스키마 변환 규칙
1. 모든 개체는 릴레이션으로 변환한다
2. 다대다 관계는 릴레이션으로 변환한다
3. 일대다 관계는 외래키로 표현한다
   1. 일반적인 일대다 관계는 외래키로 표현
   2. 약한 개체가 참여하는 일대다 관계는 외래키를 포함해서 기본키로 지정
4. 일대일 관계를 외래키로 표현한다
   1. 일반적인 일대일 관계는 외래키를 서로 주고받음
   2. 일대일 관계에 필수적으로 참여하는 개체의 릴레이션만 외래키를 받음
   3. 모든 개체가 일대일 관계에 필수적으로 참여하면 릴레이션 하나로 합침
5. 다중 값 속성은 릴레이션으로 변환한다
### 2. 릴레이션 스키마 변환 규칙을 이용한 논리적 설계
## 5. 물리적 설계와 구현
- 하드웨어나 운영체제 특성 고려하여 설계
# Chapter 09. 정규화
## 1. 정규화의 개념과 이상 현상
### 1. 정규화의 개념
- 정규화(normalization): 이상 현상을 제거하면서 DB를 올바르게 설계해나가는 과정
- 이상 현상(anomaly): DB를 잘못 설계하면 불필요한 데이터 중복이 발생하여 릴레이션에 대한 데이터의 삽입, 수정, 삭제 연산을 수행할 때 발생하는 부작용
### 2. 이상현상의 종류
- 삽입 이상: 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제
	- ex. 이벤트에 참여하지 않은 회원 데이터를 이벤트 참여 릴레이션에 삽입 시 임시 이벤트번호를 삽입해야 함
- 갱신 이상: 중복 튜플 중 일부만 변경하여 데이터가 불일치하게 되는 모순의 문제
	- ex. 이벤트 참여 릴레이션에서 한 회원의 등급이 변경 되었을 때 해당 고객에 대한 모든 튜플이 변경되어야 하는데 그렇지 않으면 모순 발생
- 삭제 이상: 튜플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제
	- ex. 이벤트 한번 참여한 고객이 이벤트 참여를 취소하여 해당 튜플 삭제 시, 유일하게 가지고 있는 고객 정보도 삭제하므로 이벤트와 관련 없는 정보도 손실됨
### 3. 정규화의 필요성
- 정규화는 이상 현상이 발생하지 않도록 릴레이션을 관련이 있는 속성들로만 구성하기 위해 릴레이션을 분해하는 과정
- 함수적 종속성: 정규화 과정에서 고려해야 하는 속성들 간의 관련성
## 2. 함수 종속
- 하나의 릴레이션을 구성하는 속성들의 부분집합을 X와 Y라 할 때, 어느 시점에서든 릴레이션 내의 모든 튜플에서 X 값에 대한 Y 값이 항상 하나면 "X가 Y를 함수적으로 결정한다", "Y가 X에 함수적으로 종속되어 있다" 라고 함
- X → Y
- X: 결정자, Y: 종속자
- 완전 함수 종속: 릴레이션에서 속성 집합 Y가 속성 집합 X에 함수적으로 종속되어 있지만, 속성 집합 X 전체에 종속된 것이지 일부분에 종속된 것이 아님을 의미
- 부분 함수 종속: 속성 집합 Y가 속성 집합 X의 전체가 아닌 일부분에도 함수적으로 종속됨을 의미
## 3. 기본 정규형과 정규화 과정
### 1. 정규화의 개념과 정규형의 종류
- 정규화: 함수 종속성을 이용하여 릴레이션을 연관성이 있는 속성들로만 구성되도록 분해해서 이상현상이 발생하지 않는 올바른 릴레이션으로 만들어나가는 과정
- 기본 정규형
	- 제1정규형
	- 제2정규형
	- 제3정규형
	- 보이스/코드 정규형
- 고급 정규형
	- 제4정규형
	- 제5정규형
### 2. 제1정규형 1NF: First Normal Form
- 릴레이션에 속한 모든 속성의 도메인이 원자 값으로만 구성되어 있으면 제1정규형에 속함
### 3. 제2정규형 2NF
- 릴레이션이 제1정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 완전 함수 종속되면 제2정규형에 속함
### 4. 제3정규형 3NF
- 릴레이션이 제2정규형에 속하고, 기본키가 아닌 모든 속성이 기본키에 이행적 함수 종속이 되지 않으면 제3정규형에 속함
- X → Y, Y → Z 면 논리적으로 X → Z 성립
	- 이 때 속성 집합 Z가 속성 집합 X에 이행적으로 함수 종속되었다고 함
### 5. 보이스/코드 정규형 BCNF: Boyce/Codd Normal Form
- 릴레이션의 함수 종속 관계에서 모든 결정자가 후보키이면 보이스/코드 정규형에 속함
### 6. 제4정규형과 제5정규형
- 제4정규형: 보이스/코드 정규형을 만족하면서 함수 종속이 아닌 다치 종속을 제거해야 만족
- 제5정규형: 릴레이션이 제4정규형을 만족하면서 후보키를 통하지 않는 조인 종속을 제거해야 만족
# 예상 질문
1. 데이터베이스 설계 과정에서 개념적 설계 단계에서 세부 단계 간단하게 설명과 관련 경험을 말씀해주세요
	1. 개체와 속성 추출
	2. 관계 추출
	3. E-R 다이어그램 작성
2. 이상현상의 종류 중 한 가지 설명과 예시
- 삽입 이상: 새 데이터를 삽입하기 위해 불필요한 데이터도 함께 삽입해야 하는 문제
	- ex. 이벤트에 참여하지 않은 회원 데이터를 이벤트 참여 릴레이션에 삽입 시 임시 이벤트번호를 삽입해야 함
- 갱신 이상: 중복 튜플 중 일부만 변경하여 데이터가 불일치하게 되는 모순의 문제
	- ex. 이벤트 참여 릴레이션에서 한 회원의 등급이 변경 되었을 때 해당 고객에 대한 모든 튜플이 변경되어야 하는데 그렇지 않으면 모순 발생
- 삭제 이상: 튜플을 삭제하면 꼭 필요한 데이터까지 함께 삭제되는 데이터 손실의 문제
	- ex. 이벤트 한번 참여한 고객이 이벤트 참여를 취소하여 해당 튜플 삭제 시, 유일하게 가지고 있는 고객 정보도 삭제하므로 이벤트와 관련 없는 정보도 손실됨