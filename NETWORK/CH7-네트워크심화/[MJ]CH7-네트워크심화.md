# CH7 네트워크 심화

## 7-1 안정성을 위한 기술 

- 서버를 안정적으로 관리하기 위한 이중화와 다중화, 트래픽을 고르게 분산하는 기술인 로드 밸런싱이 있다. 
<br>

### 가용성

- 안정성 : 특정 기능을 언제든 균일한 성능으로 수행할 수 있는 특성 
- 가용성 : 안정성을 수치화한 정도. 컴퓨터 시스템이 특정 기능을 실제로 수행할 수 있는 시간의 비율 
- 가용성 = 업타임 / (업타임+다운타임) 
  - 업타임 : 정상적인 사용시간
  - 다운타임 : 정상적인 사용이 불가능한 시간 
- 가용성을 높이려면 다운타임을 낮추어야 한다. 

<br>

### 이중화 

- 예비(백업)을 마련하는 것을 의미하며, 보통은 시스템을 이중화 하는 것을 의미한다. (웹서버, 서버컴퓨터, 스위치, NIC, 데이터베이스 등 )
- 단일 장애점 : 문제가 발생할 경우 시스템 전체가 중단될 수 있는 대상을 의미한다. 단일 장애점을 이중화하여 이런 문제를 피할 수 있다. 

### 이중화 방식 2가지 

1. 액티브/스탠바이 
- 액티브는 가동 상태를 의미한다. 
- 스탠바이는 액티브의 백업으로서 대기하는 상태를 의미한다. 
- 따라서 하나는 가동하고 다른 하나는 백업 용도로 대기 상태(스탠바이)로 두는 방식이다. (자동으로 시스템이 전환되는 것을 페일오버(failover)라고 한다. )
- 하나의 장비를 사용할 때에 비해 성능상의 큰 변화를 갖기 어렵다. 

2. 액티브 / 액티브
- 두개를 동시에 가동 상태로 두는 방식을 의미한다. 
- 한 시스템에 문제가 발생하면 순간적으로 다른 시스템에 부하가 급증할 수 있다. 


### 다중화 

- 이중화보다 여러개 두는 것이다. 
- 티밍(teaming) : 윈도우에서 사용하는 용어이다. 
- 본딩(bonding) : 리눅스에서 사용하는 용어이다.
  - 두 기술 모두 여러개의 네트워크인터페이스를 이중화/다중화하여 1개의 매우 뛰어나고 안정적인 성능의 인터페이스처럼 보이게 한다. 

<br>

### 로드 밸런싱 

- 서버를 다중화 했을 때, 트래픽 분배 문제가 발생한다.트래픽의 고른 분배를 위해 사용되는 기술이 로드 밸런싱이다. 
- 트래픽은 주어진 시점에 특정 노드를 경유한 패킷의 양을 의미한다. 
- HAProxy, Envoy등의 소프트웨어와 Nginx로 로드밸런싱을 할 수 있다. 
- 주로 이중화/다중화된 서버와 클라이언트 사이에 위치한다. 클라이언트는 로드밸런서에 요청을 보내고 로드밸런서는 해당 요청을 각 서버에 균등하게 분배한다. 
- 로드밸런싱의 알고리즘으로는 라운드로빈 알고리즘(돌아가며 연결), 최소연결 알고리즘(연결이 적은 서버부터 우선적으로 부하 전달), 해시 자료구조 활용등이 있다. 

<br>

### 헬스체크 

- 다중화된 서버 환경에서 현재 문제가 있는 서버가 존재하는지, 올바른 응답을 주는지를 확인하는 검사이다. 
- 서버의 상태를 주기적으로 모니터링  하는 것이다. 주로 로드밸런서에 의해 이루어지는 경우가 많고, HTTO, ICMP등 다양한 프로토콜을 활용할 수 있다. 

<br>


### 포워드 프록시와 리버스 프록시 

- 포워드 프록시 : 보통 프록시를 의미한다. 

- 리버스 프록시 : 보통 게이트웨이를 의미한다. 

<br>

## 7-2 안전성을 위한 기술 
<br>

### 암호화

- 대칭키 암호화 : 암호화와 복호화에 동일한 키를 사용하는것 
  - 상대방에게 안전하게 키를 전달하기 어렵다 
  - 부하가 적어 빠르게 암호화 복호화를 할 수 있다. 
- 공개키 암호화 : 암호화와 복호화에 다른 키를 사용하는 것 
  - 공개키와 개인키가 존재한다. 
  - 클라이언트의 원문 -(공개키로 암호화)-> 암호 -(개인키로 복호화)-> 서버에 원문으로 전달

### 인증서 

- 일반적으로 공개키 인증서를 의미한다. 
- 예를들어 내 컴퓨터가 웹 서버로부터 공개키를 전달 받는다. 이 공개키가 신뢰할 수 있는지를 확인해야한다. 따라서 웹서버는 공개키와 유효기간, 누가만들었는지, 조작여부등의 내용을 포함한 인증서를 보 내야한다. 


<br>

### HTTPS: SSL과 TLS

- SSL, TLS는 인증과 암호화를 수행하는 프로토콜이며, TLS는 SSL을 계승한 프로토콜이다. HTTPS에서 이 SSL/TLS를 주로 사용한다. 
- TLS 1.3을 기반으로 HTTPS메시지는 3단계를 거쳐서 송수신된다. 
  - TCP 3-way handshake
  - TLS handShake
  - 암호화된 메세지 송수신 
- 클라이언트는 ClientHello를 보내면서 암호화통신을 위해 맞춰야할 정보를 제시한다. 
- 서버는 ServerHello를 보내며 클라이언트가 보낸 메시지 정보를 선택한다. 
- 결정된 정보를 토대로 서버와 클라이언트는 암호화에 사용할 키를 만든다. 
- 또한 Certificate메시지와 CertificateVerify메시지를 전송한다. 이를 토대로 서버의 공개키를 검증한다. 

<br>

## 7-3 무선 네트워크 

### 전파와 주파수 

- 전파는 전자기파의 일종이다. 

### 와이파이와 802.11

- LAN환경에서의 유선통신은 IEEE 802.3으로 표준화되어있다. 
- 대부분 2.4GHz, 5GHz를 사용한다. 
- 주파수 대역은 채널이라는 하위 주파수대역으로 세분화된다. 

### AP와 서비스셋 

- AP : 무선 엑세스 포인트이다. 무선 네트워크를 생성하기 위한 장치이다. = 공유기 
- 서비스셋 : AP와 여러장치들의 집합을 의미한다. 같은 서비스에 속한 장치들은 같은 무선 네트워크에 속한다고 볼 수 있다. 
