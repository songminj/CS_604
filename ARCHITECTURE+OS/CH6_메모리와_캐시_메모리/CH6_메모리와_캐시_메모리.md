# CH6 메모리와 캐시 메모리 

## 6-1. RAM의 특징과 종류

### RAM의 특징 

- RAM에는 실행할 프로그램의 명령어와 데이터가 저장된다. 그리고 전원을 내리면 데이터가 모두 날아간다. (휘발성 저장 장치)
- 그래서 RAM에는 실행할 대상을 저장하고 보조기억장치와 같은 비휘발성 저장장치에는 보관할 대상을 저장한다. 


### RAM의 용량과 성능 

- RAM이 작으면 보조기억에서 실행할 프로그램을 계속 가져와야 한다. 따라서 실행 시간이 길어진다. 
- RAM용량이 증가하면 속도가 어느정도 증가하지만, 비례해서 증가하는 것은 아니다. 

### RAM의 종류 

- DRAM : Dynamic RAM. 저장된 데이터가 동적으로 변하는 RAM을 의미한다. 우리가 일반적으로 사용하는 RAM이다. 
- SRAM : Static RAM. 저장된 데이터가 변하지 않는 RAM을 의미한다. 그래서 주기적으로 데이터를 재활성화 할 필요가 없다. DRAM보다 속도가 빠르다. 그러나 가격이 비싸고 집적도가 낮고 소비전력도 크다.  
- SDRAM : 클럭 신호와 동기화된 발전된 형태의 DRAM을 의미한다. 
- DDR SDRAM : 최근에 많이 사용되는 RAM이다. 대역폭을 넓혀서 속도를 빠르게 만들었다. 

## 6-2. 메모리의 주소 공간

### 물리주소와 논리 주소 

-  물리주소 : 정보가 실제로 저장된 하드웨어 상의 주소를 의미한다. 메모리가 사용하는 주소이다. 
- 논리 주소 : 실행중인 프로그램 각각에게 부여된 0번지부터 시작하는 주소를 의미한다. CPU가 보는 주소는 logical address이다. 

### 논리주소가 물리주소로 변환되는 방법 

- CPU와 주소버스 사이에 위치한 메모리 관리 장치(MMU)라는 하드웨어에 의해 수행된다. 
- MMU는 CPU가 발생시킨 논리 주소에 베이스 레지스터 값을 더하여 논리주소를 물리 주소로 변환한다. 
- 베이스 레지스터는 프로그램의 가장 작은 물리주소를 저장하고, 논리주소는 이 프로그램의 시작점으로부터 얼마나 떨어진지를 기억하고 있다. 


### 메모리 보호 기법 

- 프로그램의 논리 주소를 벗어났을 때의 명령어를 실행해서는 안된다. 만약 실행된다면 다른 프로그램에 잘못 값이 저장되기 때문이다.
- 이럴 때 한계 레지스터라는 레지스터가 담당한다. 
- 한계 레지스터는 논리주소의 최대 크기를 저장한다. 
- CPU는 메모리에 접근하기 전에 접근하는 논리주소가 한계 레지스터보다 작은지 항상 검사하고 이것보다 높은 논리주소에 접근하려고 하면 인터럽트를 발생시킨다. 


## 6-3. 캐시 메모리 

- CPU가 연산을 빠르게 하기 위해 캐시 메모리를 사용한다. 

### 저장장치 계층 구조 

- 빠른 저장장치와 용량이 큰 저장장치는 양립하기 어렵다
- CPU에 얼마나 가까운가를 기준으로 저장장치를 계층적으로 나눌 수 있으며 이를 저장장치 계층 구조라고 한다. 

### 캐시 메모리 

- 캐시 메모리는 CPU와 메모리 사이에 위치하고, 레지스터보다 용량이 크고 메모리보다 빠른 SRAM기반의 저장장치이다. 
- CPU(코어)와 가까운 순서대로 계층을 구성하며 L1,L2, L3캐시가 있다. 

### 참조 지역성 원리 

- 보조기억장치는 전원이 꺼져도 기억할 대상을 저장하고, 메모리는 실행중인 대상을 저장한다. 캐시는 CPU가 사용할법한 대상을 예측하여 저장한다.
- 만약 자주 사용할 것 같다고 예측한 데이터가 실제로 들어맞아 CPU에서 활용될 경우를 캐시 히트 (cache hit)라고 한다. 반대는 캐시미스 (cache miss)라고 한다. 
- 그리고 캐시 히트 횟수 / (캐시히트 횟수 + 캐시 미스 횟수) = 캐시 적중률 이라고 하며 일반적인 컴퓨터는 대략 85~95%정도 된다. 

- 보통 참조지역성 원리를 사용한다 
  - CPU는 최근 접근했던 메모리 공간에 다시 접근하려는 경향이 있다
    - 시간 지역성 
  - CPU는 접근한 메모리 공간 근처를 접근하려는 경향이 있다. 
    - 공간 지역성 
    - 웹 프라우저 프로그램은 웹 브라우저 관련 데이터가 모여서 저장되고, 게임은 게임 관련 데이터가 모여서 저장된다 