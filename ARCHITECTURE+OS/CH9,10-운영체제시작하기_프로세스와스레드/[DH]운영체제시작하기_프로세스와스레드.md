# Chapter 9. 운영체제 시작하기
## 09-1 운영체제를 알아야 하는 이유
### 운영체제란
- 실행할 프로그램에 필요한 자원을 할당하고, 알바르게 실행되도록 돕는 특별한 프로그램
  - 메모리 관리, CPU 할당 등
- 여느 프로그램과 마찬가지로 메모리에 적재되어야 함
- 다만, 특별하기에 메모리 내 커널 영역에 따로 적재되어 실행됨(이외: 사용자 영역)

### 운영체제를 알아야 하는 이유
- 문제 해결의 실마리를 찾을 수 있음

## 운영체제의 큰 그림
### 운영체제의 심장, 커널
- 커널: 자원에 접근하고 조작하는 기능, 프로그램이 안전하게 실행되게 하는 기능 등 핵심 서비스를 담당하는 부분
- OS가 설치된 모든 기기에는 커널이 있음
- UI(GUI, CLI)는 사용자와의 상호작용 통로로, 커널에 포함되지 않은 서비스임

### 이중 모드와 시스템 호출
- 이중 모드(dual mode): CPU가 명령어를 실행하는 모드를 사용자 모드와 커널 모드로 구분하는 방식
- 사용자 모드: OS 서비스를 제공받을 수 없는 실행 모드(자원 접근 불가)
- 커널 모드: OS 서비스를 제공받을 수 있는 실행 모드(커널 영역 코드를 실행할 수 있는 모드)
- 사용자 모드에서 커널 모드가 되기 위해선 OS에 요청해야 함(시스템 콜)

### 운영체제의 핵심 서비스
- 프로세스 관리
- 자원 접근 및 할당
- 파일 시스템 관리

# Chapter 10. 프로세스와 스레드
## 10-1 프로세스 개요
### 프로세스 직접 확인하기
- 프로세스: 실행 중인 프로그램
- 포그라운드 프로세스: 사용자가 보는 앞에서 실행되는 프로세스
- 백그라운드 프로세스: 사용자가 보지 못하는 뒤편에서 실행되는 프로세스(= 데몬, 서비스)

### 프로세스 제어 블록
- 프로세스 제어 블록: PCB(Process Control Block)
  - 프로세스와 관련된 정보를 저장하는 자료 구조
  - 프로세스를 식별하기 위해 꼭 필요한 정보들이 저장됨
  - 커널 영역에 생성됨
  - PCB 저장 정보
    - 프로세스 ID(PID)
    - 레지스터 값
    - 프로세스 상태
    - CPU 스케줄링 정보
    - 메모리 관리 정보
    - 사용한 파일과 IO 장치 목록

### 문맥 교환(Context Switching)
- 문맥: 하나의 프로세스 수행을 재개하기 위해 기억해야 할 정보
- 문맥 교환: PCB로부터 정보를 복구해 새로운 프로세스를 실행하는 것

### 프로세스의 메모리 영역
- 각 프로세스는 크게 4개 영역으로 메모리 영역을 구분
  - 코드 영역: 수행할 수 있는 코드(기계어)가 저장됨
  - 데이터 영역: 프로그램이 실행되는 동안 유지할 데이터가 저장됨(전역변수)
  - 힙 영역: 프로그램을 만드는 사용자, 프로그래머가 직접 할당할 수 있는 저장 공간. 관리를 제대로 하지 않으면 메모리 릭 발생
  - 스택 영역: 데이터를 일시적으로 저장하는 공간
- 코드 영역, 데이터 영역은 바뀔 일이 없으므로 정적 할당 영역 이라고 함
- 힙, 스택 영역은 그기가 변할 수 있으므로 동적 할당 영역이라고 함

## 10-2 프로세스 상태와 계층 구조
### 프로세스 상태
- 생성 상태: new. 프로세스를 생성 중인 상태
- 준비 상태: ready. CPU를 할당받기를 기다리는 상태(실행상태로 전환되는 것을 dispatch라고 함)
- 실행 상태: running. CPU를 할당받아 실행 중인 상태
- 대기 상태: blocked. IO 장치 사용 등으로 인해 결과를 기다려야 하는 상태 
- 종료 상태: terminated. 프로세스가 종료된 상태 

### 프로세스 계층 구조
- 프로세스는 싱행 도중 시스템 호출을 통해 다른 프로세스를 생성할 수 있음
- 부모 프로세스: 새 프로세스를 실행한 프로세스
- 자식 프로세스: 부모 프로세스에 의해 생성된 프로세스
- 자식 프로세스의 PCB에는 부모 프로세스의 PID인 PPID가 기록되기도 함
- 프로세스는 트리 구조를 이루게 됨

### 프로세스 생성 기법
- 부모 프로세스는 fork를 통해 자신의 복사본을 자식 프로세스로 생성
- 자식 프로세스는 exec를 통해 자신의 메모리 공간을 다른 프로그램으로 교체함
  - exec 시스템 호출을 통해 새로운 프로그램으로 전환됨

## 10-3 스레드
### 프로세스와 스레드
- 스레드가 하나라면, 단일 스레드 프로세스 라고 함

### 멀티프로세스와 멀티스레드
- 멀티프로세스: 여러 프로세스를 동시에 실행하는 것
- 멀티스레드: 여러 스레드로 프로세스를 동시에 실행하는 것
  - 차이
    - 프로세스끼리는 기본적으로 자원을 공유하지 않음
    - 스레드들은 가지고 있는 자원을 공유함(효율적인 자원 관리 가능, 동시 접근 문제 O)